<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>boxsharp: a responsive lightbox pop-up window with CSS3 and vanilla JavaScript</title>
    <meta name="description" content="Demo page for a lightweight pop-up window implementation that displays images, video and other content.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="author" href="https://hunyadi.info.hu/levente">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/default.min.css">
    <style>
        body {
            background-color: #eee;
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
            margin: 8px;
        }

        header {
            background-color: #ccc;
            margin: -8px;
            padding: 8px;
        }

        @media screen and (hover) {
            header {
                top: 0;
                position: sticky;
            }
        }

        img {
            border: 1px solid darkgray;
            border-radius: 1em;
        }

        img,
        video {
            max-width: 100%;
        }

        .hyperlink {
            color: -webkit-link;
            cursor: pointer;
            text-decoration: underline;
        }

        /* custom formatting for same-page content */
        #lorem-ipsum>p::first-letter {
            initial-letter: 2 1;
            font-weight: bold;
            float: left;
        }

        #lorem-ipsum>p>span.lead {
            font-weight: bold;
        }

        /* custom formatting for image/video captions */
        boxsharp-dialog>figcaption b {
            color: darkgreen;
        }
    </style>
    <script defer src="boxsharp/boxsharp.min.js" type="module"></script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
    <script defer type="module">
        import { BoxsharpCollection } from "./boxsharp/boxsharp.min.js";
        import { generateText } from "./js/sample.js";
        document.addEventListener("DOMContentLoaded", () => {
            document.querySelectorAll("template.example").forEach(template => {
                const div = document.createElement("div");
                const pre = document.createElement("pre");
                const code = document.createElement("code");
                div.append(template.content);
                code.className = "language-html";
                code.textContent = div.innerHTML;
                code.textContent = code.textContent.replace(/^\s*/gm, "");
                pre.append(code);
                template.after(div, pre);
                template.remove();
            });
            hljs.highlightAll();

            generateText(document.getElementById("lorem-ipsum"));

            BoxsharpCollection.scan();
        });
    </script>
</head>

<body>
    <header>
        <h1>boxsharp: a responsive lightbox pop-up window</h1>

        <nav>by <a href="https://hunyadi.info.hu/">Levente Hunyadi</a> | <a href="https://hunyadi.info.hu/projects/boxsharp/">Demo page</a> | <a
                href="https://github.com/hunyadi/boxsharp/">Project page</a></nav>
    </header>

    <section id="features">
        <h2>Features</h2>

        <ul>
            <li><strong>Modern browser support.</strong><br>Works seamlessly in Chrome, Edge, Firefox, and Safari.</li>
            <li><strong>Versatile content display.</strong><br>Handles images, videos, PDFs, same-page content and external pages.</li>
            <li><strong>Custom captions.</strong><br>Add description to each item using plain text or HTML tags.</li>
            <li><strong>Flexible navigation.</strong><br>Navigate using buttons, keyboard (left/right arrows), mouse, or swipe gestures.</li>
            <li><strong>History-aware.</strong><br>Supports browser <em>back</em> and <em>forward</em> buttons to close and reopen.</li>
            <li><strong>Interactive image handling.</strong><br>Expand large images and pan by dragging.</li>
            <li><strong>Optimized image loading.</strong><br>Automatically selects the smallest image that fills the viewport.</li>
            <li><strong>Responsive design.</strong><br>Oversized content is scaled down to fit the browser window.</li>
            <li><strong>Easy integration.</strong><br>Includes a simple API and ready-to-use code snippets for fast setup.</li>
            <li><strong>Lightweight.</strong><br>Less than 7 KB when gzipped.</li>
            <li><strong>No dependencies.</strong><br>Built with 100% CSS and pure JavaScript (ES2020, Web Components).</li>
        </ul>
    </section>

    <h2>How to use</h2>

    <h3>Prerequisites for production</h3>

    <ol>
        <li>Copy <a href="boxsharp/boxsharp.min.js" download="boxsharp.min.js">boxsharp.min.js</a> to your web server.</li>
        <li>Add the following to the <code>&lt;head&gt;</code> section of your HTML (using the appropriate location):<br>
            <pre><code class="language-html">&lt;script defer src="path/to/boxsharp.min.js" type="module"&gt;&lt;/script&gt;</code></pre>
        </li>
        <li>Proceed with <em>modern</em> or <em>classic</em> syntax.</li>
    </ol>

    <h3>Prerequisites for debug mode</h3>

    <ol>
        <li>Copy <a href="boxsharp/boxsharp.css" download="boxsharp.css">boxsharp.css</a> and <a href="boxsharp/boxsharp.js"
                download="boxsharp.js">boxsharp.js</a> to your web server.</li>
        <li>Add the following to the <code>&lt;head&gt;</code> section of your HTML (using the appropriate location):<br>
            <pre><code class="language-html">&lt;script defer src="path/to/boxsharp.js" type="module"&gt;&lt;/script&gt;</code></pre>
        </li>
        <li>Proceed with <em>modern</em> or <em>classic</em> syntax.</li>
    </ol>

    <h3>Modern syntax</h3>

    <p>boxsharp is implemented as a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_components">web component</a>. You can utilize the element
        <code>&lt;boxsharp-link&gt;</code> to make text or an image open a pop-up window.
    </p>

    <ol>
        <li>Find the image that you want to trigger a pop-up window when clicked.</li>
        <li>Wrap the image in a <code>&lt;boxsharp-link&gt;</code> element.</li>
        <li>Set the attribute <code>srcset</code> on the <code>&lt;img&gt;</code> element to a series of images using the syntax for <a
                href="https://developer.mozilla.org/en-US/docs/Web/HTML/Guides/Responsive_images#resolution_switching_different_sizes">resolution switching
                with different sizes</a>.</li>
    </ol>

    <h3>Classic syntax</h3>

    <ol>
        <li>Ensure you have the initializer in the <code>&lt;head&gt;</code> section of your HTML (using the appropriate location):<br>
            <pre><code class="language-html">&lt;script defer type="module"&gt;
    import { BoxsharpCollection } from "./path/to/boxsharp.js";
    document.addEventListener("DOMContentLoaded", () => {
        BoxsharpCollection.scan();
    });
&lt;/script&gt;
</code></pre>
        </li>
        <li>Find the text or thumbnail image that you want to trigger a pop-up window when clicked.</li>
        <li>Wrap the text or image in an <code>&lt;a&gt;</code> element.</li>
        <li>Add the attribute <code>rel</code> with the value <code>boxsharp</code>.</li>
        <li>Set the attribute <code>data-srcset</code> on the <code>&lt;a&gt;</code> element to a series of images using the syntax for <a
                href="https://developer.mozilla.org/en-US/docs/Web/HTML/Guides/Responsive_images#resolution_switching_different_sizes">resolution switching
                with different sizes</a>.</li>
    </ol>

    <h2>Examples</h2>

    <h3>Display a single image</h3>

    <p>Below, we use the web component syntax to activate a pop-up window when the user clicks a thumbnail image. Information on which image to show for what
        screen size is extracted from the <code>srcset</code> attribute of the <code>&lt;img&gt;</code> element. Note the use of <code>sizes</code>, which
        ensures that the browser doesn't load a high-resolution image for the thumbnail itself. Click the expand icon in the top right corner of the pop-up
        window to display the largest image in the source set, press and hold the mouse button, and move the mouse to pan the image.
    </p>

    <template class="example">
        <boxsharp-link>
            <img alt="A small image" src="images/CD2A3E/300x200.png" width="75" height="50" sizes="75px"
                srcset="images/CD2A3E/3600x2400.png 3600w, images/CD2A3E/2400x1600.png 2400w, images/CD2A3E/1500x1000.png 1500w, images/CD2A3E/1200x800.png 1200w, images/CD2A3E/900x600.png 900w, images/CD2A3E/600x400.png 600w, images/CD2A3E/300x200.png 300w" />
        </boxsharp-link>
    </template>

    <h3>Display a navigable gallery</h3>

    <p>This example uses the classic syntax with the <code>rel</code> attribute and shows how several related images can be grouped into a single collection.
    </p>

    <template class="example">
        <a rel="boxsharp-flag" title="A red image"
            data-srcset="images/CD2A3E/3600x2400.png 3600w, images/CD2A3E/2400x1600.png 2400w, images/CD2A3E/1500x1000.png 1500w, images/CD2A3E/1200x800.png 1200w, images/CD2A3E/900x600.png 900w, images/CD2A3E/600x400.png 600w, images/CD2A3E/300x200.png 300w">
            <img src="images/CD2A3E/300x200.png" width="75" height="50" alt="Red" /></a>
        <a rel="boxsharp-flag" title="A white image"
            data-srcset="images/FFFFFF/3600x2400.png 3600w, images/FFFFFF/2400x1600.png 2400w, images/FFFFFF/1500x1000.png 1500w, images/FFFFFF/1200x800.png 1200w, images/FFFFFF/900x600.png 900w, images/FFFFFF/600x400.png 600w, images/FFFFFF/300x200.png 300w">
            <img src="images/FFFFFF/300x200.png" width="75" height="50" alt="White" /></a>
        <a rel="boxsharp-flag" title="A green image"
            data-srcset="images/436F4D/3600x2400.png 3600w, images/436F4D/2400x1600.png 2400w, images/436F4D/1500x1000.png 1500w, images/436F4D/1200x800.png 1200w, images/436F4D/900x600.png 900w, images/436F4D/600x400.png 600w, images/436F4D/300x200.png 300w">
            <img src="images/436F4D/300x200.png" width="75" height="50" alt="Green" /></a>
    </template>

    <h3>Navigable gallery with options</h3>

    <p>In the next example, we group related images into a single collection with the <code>group</code> attribute. The HTML element
        <code>&lt;boxsharp-link&gt;</code> can also take custom attributes, which are translated into display options. For example, <code>loop</code> displays
        navigation arrows even for the first and last member of the collection, which jump to the last and first member, respectively. If you have a group of
        related images, the custom attributes must be applied to the first <code>&lt;boxsharp-link&gt;</code> element.
    </p>

    <template class="example">
        <boxsharp-link group="flag" loop="true"
            srcset="images/CD2A3E/3600x2400.png 3600w, images/CD2A3E/2400x1600.png 2400w, images/CD2A3E/1500x1000.png 1500w, images/CD2A3E/1200x800.png 1200w, images/CD2A3E/900x600.png 900w, images/CD2A3E/600x400.png 600w, images/CD2A3E/300x200.png 300w">
            <img src="images/CD2A3E/300x200.png" width="75" height="50" alt="A red image" />
        </boxsharp-link>
        <boxsharp-link group="flag"
            srcset="images/FFFFFF/3600x2400.png 3600w, images/FFFFFF/2400x1600.png 2400w, images/FFFFFF/1500x1000.png 1500w, images/FFFFFF/1200x800.png 1200w, images/FFFFFF/900x600.png 900w, images/FFFFFF/600x400.png 600w, images/FFFFFF/300x200.png 300w">
            <img src="images/FFFFFF/300x200.png" width="75" height="50" alt="A white image" />
        </boxsharp-link>
        <boxsharp-link group="flag"
            srcset="images/436F4D/3600x2400.png 3600w, images/436F4D/2400x1600.png 2400w, images/436F4D/1500x1000.png 1500w, images/436F4D/1200x800.png 1200w, images/436F4D/900x600.png 900w, images/436F4D/600x400.png 600w, images/436F4D/300x200.png 300w">
            <img src="images/436F4D/300x200.png" width="75" height="50" alt="A green image" />
        </boxsharp-link>
    </template>

    <h3>Media queries</h3>

    <p>If a <code>&lt;boxsharp-link&gt;</code> element contains <code>&lt;source&gt;</code> elements as direct children, you can use <a
            href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_media_queries/Using_media_queries">media queries</a>. The first item is selected that
        matches the document media when the pop-up window opens. The browser skips <code>&lt;source&gt;</code> elements, and shows the remaining contents of
        <code>&lt;boxsharp-link&gt;</code> when the page is displayed.
    </p>

    <template class="example">
        <boxsharp-link>
            <source type="image/png" media="(max-width: 600px)"
                srcset="images/CD2A3E/900x600.png 900w, images/CD2A3E/600x400.png 600w, images/CD2A3E/300x200.png 300w">
            <source type="image/png" media="(orientation: portrait)"
                srcset="images/FFFFFF/900x600.png 900w, images/FFFFFF/600x400.png 600w, images/FFFFFF/300x200.png 300w">
            <source type="image/png" srcset="images/436F4D/900x600.png 900w, images/436F4D/600x400.png 600w, images/436F4D/300x200.png 300w">
            <img src="images/FFFFFF/300x200.png" width="75" height="50" alt="A change of colors" />
        </boxsharp-link>
    </template>

    <p>The media query <code>(hover: none)</code> typically matches mobile devices but not desktop computers. This lets us provide a different set of images for
        mobile and desktop. The following example displays a red image on mobile but a green one on desktop.</p>

    <template class="example">
        <boxsharp-link>
            <source media="(hover: none)" srcset="images/CD2A3E/300x200.png 300w">
            <source srcset="images/436F4D/900x600.png 900w, images/436F4D/600x400.png 600w, images/436F4D/300x200.png 300w">
            <img src="images/FFFFFF/300x200.png" width="75" height="50" alt="A change of colors" />
            <div slot="caption" hidden>This example displays differently on <b>desktop</b> and <b>mobile</b>.</div>
        </boxsharp-link>
    </template>

    <h3>Figures</h3>

    <p>The example below shows how to use the web component syntax with a <code>&lt;figure&gt;</code> element.</p>

    <template class="example">
        <boxsharp-link>
            <figure>
                <img alt="A placeholder image" src="https://placehold.co/300x200.png" width="300" height="200" sizes="300px"
                    srcset="https://placehold.co/3600x2400.png 3600w, https://placehold.co/2400x1600.png 2400w, https://placehold.co/1500x1000.png 1500w, https://placehold.co/1200x800.png 1200w, https://placehold.co/900x600.png 900w, https://placehold.co/600x400.png 600w, https://placehold.co/300x200.png 300w" />
                <figcaption>Observe how the image source changes dynamically in response to window size changes. When the window size is small, a low-resolution
                    image is chosen. The larger the window size, the higher the resolution of the image selected. Photo by <a
                        href="https://hunyadi.info.hu/levente/" target="_blank">Levente Hunyadi</a>.</figcaption>
            </figure>
        </boxsharp-link>
    </template>

    <p>The following example shows how to use an <code>&lt;a&gt;</code> element with a <code>rel</code> attribute in a <code>&lt;figure&gt;</code> element. The
        figure caption contains a link. We cannot wrap the entire <code>&lt;figure&gt;</code> in an <code>&lt;a&gt;</code> element because
        <code>&lt;a&gt;</code> elements cannot nest.
    </p>

    <template class="example">
        <figure>
            <a href="#" rel="boxsharp"
                data-srcset="https://placehold.co/3600x2400.png 3600w, https://placehold.co/2400x1600.png 2400w, https://placehold.co/1500x1000.png 1500w, https://placehold.co/1200x800.png 1200w, https://placehold.co/900x600.png 900w, https://placehold.co/600x400.png 600w, https://placehold.co/300x200.png 300w">
                <img src="https://placehold.co/300x200.png" alt="A placeholder image" /></a>
            <figcaption>Photo by <a href="https://hunyadi.info.hu/levente/" target="_blank">Levente Hunyadi</a>.</figcaption>
        </figure>
    </template>

    <h3>Link with text</h3>

    <p>The examples below constitute a single navigable gallery. The image to show in the pop-up window is extracted either from the <code>href</code> or the
        <code>data-srcset</code> attribute.
    </p>

    <ul>
        <li><a href="https://placehold.co/300x200.png" rel="boxsharp-link"
                data-srcset="https://placehold.co/1500x1000.png 1500w, https://placehold.co/1200x800.png 1200w, https://placehold.co/900x600.png 900w, https://placehold.co/600x400.png 600w, https://placehold.co/300x200.png 300w">Link</a>
            with <code>href</code> and <code>data-srcset</code> attributes. The image resolution is adaptively chosen
            based on browser window size.</li>
        <li>
            <a href="https://placehold.co/300x200.png" rel="boxsharp-link">Link</a> with an <code>href</code> but no
            <code>data-srcset</code> attribute. There is a single resolution available, no matter the window size.
        </li>
        <li>
            <a href="#" rel="boxsharp-link" class="hyperlink"
                data-srcset="https://placehold.co/900x600.png 900w, https://placehold.co/600x400.png 600w, https://placehold.co/300x200.png 300w">Link</a>
            with a <code>data-srcset</code> but no <code>href</code> attribute. The image resolution is selected adaptively.
        </li>
    </ul>

    <h3>Display a video</h3>

    <p>The following example uses <code>&lt;boxsharp-link&gt;</code> to wrap a <code>&lt;video&gt;</code> element. Information encapsulated in the
        <code>&lt;source&gt;</code> elements is propagated to the pop-up window.
    </p>

    <template class="example">
        <boxsharp-link>
            <figure>
                <figcaption style="display: none;">
                    <a href="https://www.bigbuckbunny.org">Big Buck Bunny</a> tells the story of a giant rabbit with a heart bigger than himself. When one sunny
                    day three rodents rudely harass him, something snaps... and the rabbit ain't no bunny anymore! In the typical cartoon tradition he prepares
                    the nasty rodents a comical revenge. <span style="font-size: smaller;">Licensed under the Creative Commons Attribution license.</span>
                </figcaption>
                <video poster="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/images/BigBuckBunny.jpg">
                    <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4" />
                </video>
            </figure>
        </boxsharp-link>
    </template>

    <template class="example">
        <boxsharp-link href="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4">
            <span class="hyperlink">Big Buck Bunny</span>
        </boxsharp-link>
    </template>

    <h3>Display a video from YouTube</h3>

    <ol>
        <li>Click the button <em>Share</em> below the video.</li>
        <li>Choose <em>Embed</em>.</li>
        <li>Locate attributes <code>width</code>, <code>height</code> and <code>src</code> in the <code>&lt;iframe&gt;</code> content.</li>
        <li>Create a <code>&lt;boxsharp-link&gt;</code> with attributes <code>width</code>, <code>height</code> and <code>href</code>.</li>
    </ol>

    <template class="example">
        <boxsharp-link width="560" height="315" href="https://www.youtube.com/embed/CKclyyL6Uzw?si=TmUtXqDBeeQDVRw6">
            <span
                style="display: inline-block; border-radius: 25px; background-color: red; color: white; width: 100px; height: 75px; font-size: 45px; line-height: 75px; text-align: center; cursor: pointer;">‚ñ∂</span>
        </boxsharp-link>
    </template>

    <h3>Location on Maps</h3>

    <ol>
        <li>Click the button <em>Share</em>.</li>
        <li>Choose <em>Embed a map</em>.</li>
        <li>Locate attribute <code>src</code> in the <code>&lt;iframe&gt;</code> content.</li>
        <li>Create a <code>&lt;boxsharp-link&gt;</code> with attributes <code>width</code>, <code>height</code> and <code>href</code>.</li>
    </ol>

    <template class="example">
        <boxsharp-link width="600" height="600"
            href="https://maps.google.com/maps?q=Budapest+University+of+Technology+and+Economics&amp;hl=en&amp;ie=UTF8&amp;ll=47.481307,19.056215&amp;spn=0.01005,0.022724&amp;sll=37.0625,-95.677068&amp;sspn=47.885545,93.076172&amp;vpsrc=6&amp;t=m&amp;z=16&amp;output=embed">
            <span style="font-size: 75px; cursor: pointer;">üó∫Ô∏è</span>
        </boxsharp-link>
    </template>

    <h3>Display external content</h3>

    <p>The example below points to an external website. When the pop-up window opens, the content is visualized in <code>&lt;iframe&gt;</code> element. We use
        attributes <code>width</code> and <code>height</code> because <code>&lt;iframe&gt;</code> doesn't have intrinsic dimensions.</p>

    <template class="example">
        <boxsharp-link width="800" height="600" href="https://www.wikipedia.org/">
            <img alt="Wikipedia logo" src="https://upload.wikimedia.org/wikipedia/en/8/80/Wikipedia-logo-v2.svg">
            <div slot="caption" hidden>This pop-up window displays the <a href="https://www.wikipedia.org/" target="_blank">Wikipedia</a> website.</div>
        </boxsharp-link>
    </template>

    <h3>PDF</h3>

    <p><a href="https://www.rfc-editor.org/rfc/rfc3778#section-3">PDF-open</a> parameters allow us to customize the appearance of a PDF document shown in the
        pop-up window. Notice how the following link to a PDF document contains key-value parameters in the URL fragment how to display the PDF.</p>

    <template class="example">
        <boxsharp-link width="800" height="600"
            href="https://opensource.adobe.com/dc-acrobat-sdk-docs/pdfstandards/PDF32000_2008.pdf#page=2&pagemode=none&view=FitH">
            <span class="hyperlink">PDF</span>
        </boxsharp-link>
    </template>

    <h3>Same-page content</h3>

    <p>The next example shows the boxsharp list of features in the pop-up window. This content is defined earlier in the document in a
        <code>&lt;section&gt;</code> element, and only its <code>id</code> is referenced here with a <a
            href="https://developer.mozilla.org/en-US/docs/Web/URI/Reference/Fragment">URL fragment</a>. The content is cloned rather than moved to
        the pop-up window.
    </p>

    <template class="example">
        <boxsharp-link href="#features">
            <span class="hyperlink">boxsharp list of features</span>
        </boxsharp-link>
    </template>

    <p>If the content is too long to fit into the visible area of the pop-up window, vertical scrollbars are shown. This is illustrated by a randomly-generated
        <a href="https://en.wikipedia.org/wiki/Lorem_ipsum">Lorem ipsum</a> text. (Refresh the page to generate new text.) Note that if the source element has
        <code>display: none</code>, it is automatically removed when the content is cloned. This allows content to remain hidden in the document until it is
        about to be shown in the pop-up window.
    </p>

    <template class="example">
        <section id="lorem-ipsum" lang="la" style="display:none;">
            <p><span class="lead">Lorem ipsum dolor sit amet</span>, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna
                aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in
                reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui
                officia deserunt mollit anim id est laborum.</p>
        </section>

        <boxsharp-link width="800" height="600" href="#lorem-ipsum">
            <span class="hyperlink">Lorem ipsum dolor sit amet...</span>
            <div slot="caption" hidden>This pop-up window displays text</div>
            <div slot="caption" hidden>in <b>Latin</b>.</div>
        </boxsharp-link>
    </template>

    <h3>Unavailable resource</h3>

    <p>When a linked resource is not available, a placeholder emoji (picture in a frame) is shown.</p>

    <p>
        <boxsharp-link href="https://google.com/image.jpeg">
            <span class="hyperlink">Image</span>
        </boxsharp-link>
        |
        <boxsharp-link href="https://google.com/video.mpeg">
            <span class="hyperlink">Video</span>
        </boxsharp-link>
        |
        <boxsharp-link href="https://google.com/404.html">
            <span class="hyperlink">Frame</span>
        </boxsharp-link>
        |
        <boxsharp-link>
            <span class="hyperlink">Missing</span>
        </boxsharp-link>
    </p>
</body>

</html>
